{"version":3,"names":["ErrorCatalog","ErrorLevel","Validator","constructor","errorHandler","customValidators","Map","registerValidator","name","validatorFn","set","validateExists","value","errorCode","customMessage","context","undefined","error","createError","validateCondition","condition","validateType","expectedType","isValid","isNaN","Number","isInteger","Array","isArray","validate","validatorName","validator","get","Error"],"sources":["Validator.js"],"sourcesContent":["import ErrorCatalog from './ErrorCatalog';\nimport ErrorLevel from './ErrorLevel';\n\nexport default class Validator {\n  constructor(errorHandler = null) {\n    this.errorHandler = errorHandler;\n    this.customValidators = new Map();\n  }\n\n  registerValidator(name, validatorFn) {\n    this.customValidators.set(name, validatorFn);\n    return this;\n  }\n\n  validateExists(value, errorCode, customMessage = null, context = {}) {\n    if (value === undefined || value === null) {\n      if (this.errorHandler) {\n        const error = this.errorHandler.createError(\n          errorCode,\n          customMessage,\n          { ...context, value }\n        );\n        return false;\n      }\n      return false;\n    }\n    return true;\n  }\n\n  validateCondition(condition, errorCode, customMessage = null, context = {}) {\n    if (!condition) {\n      if (this.errorHandler) {\n        const error = this.errorHandler.createError(\n          errorCode,\n          customMessage,\n          context\n        );\n        return false;\n      }\n      return false;\n    }\n    return true;\n  }\n\n  validateType(value, expectedType, errorCode, customMessage = null, context = {}) {\n    let isValid = false;\n\n    switch (expectedType) {\n      case 'string':\n        isValid = typeof value === 'string';\n        break;\n      case 'number':\n        isValid = typeof value === 'number' && !isNaN(value);\n        break;\n      case 'integer':\n        isValid = Number.isInteger(value);\n        break;\n      case 'positive':\n        isValid = typeof value === 'number' && value > 0;\n        break;\n      case 'nonnegative':\n        isValid = typeof value === 'number' && value >= 0;\n        break;\n      case 'boolean':\n        isValid = typeof value === 'boolean';\n        break;\n      case 'object':\n        isValid = value !== null && typeof value === 'object' && !Array.isArray(value);\n        break;\n      case 'array':\n        isValid = Array.isArray(value);\n        break;\n      case 'function':\n        isValid = typeof value === 'function';\n        break;\n      case 'null':\n        isValid = value === null;\n        break;\n      case 'undefined':\n        isValid = value === undefined;\n        break;\n      default:\n        isValid = false;\n    }\n\n    if (!isValid) {\n      if (this.errorHandler) {\n        const error = this.errorHandler.createError(\n          errorCode,\n          customMessage,\n          { ...context, value, expectedType }\n        );\n      }\n      return false;\n    }\n\n    return true;\n  }\n\n  validate(validatorName, value, errorCode, context = {}) {\n    const validator = this.customValidators.get(validatorName);\n    \n    if (!validator) {\n      if (this.errorHandler) {\n        this.errorHandler.createError(\n          'VALIDATOR_NOT_FOUND', \n          `バリデータ ${validatorName} が見つかりません`, \n          context\n        );\n      }\n      throw new Error(`Validator ${validatorName} not found`);\n    }\n\n    const isValid = validator(value, context);\n    \n    if (!isValid && this.errorHandler) {\n      this.errorHandler.createError(\n        errorCode, \n        `バリデーションに失敗しました: ${validatorName}`, \n        context\n      );\n    }\n\n    return isValid;\n  }\n}\n"],"mappings":"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","ignoreList":[]}