66be8f36ab576816b2ef9291ef1db1a2
/**
 * Unit tests for the EventSystem module
 */

const EventSystem = require('../../../../src/core/event/EventSystem');
describe('EventSystem', () => {
  // Basic functionality tests
  describe('Basic event handling', () => {
    test('should register and trigger event listeners', () => {
      const eventSystem = new EventSystem();
      const mockCallback = jest.fn();
      eventSystem.on('testEvent', mockCallback);
      eventSystem.emit('testEvent', {
        data: 'test'
      });
      expect(mockCallback).toHaveBeenCalledTimes(1);
      expect(mockCallback).toHaveBeenCalledWith({
        data: 'test'
      });
    });
    test('should register one-time listeners', () => {
      const eventSystem = new EventSystem();
      const mockCallback = jest.fn();
      eventSystem.once('testEvent', mockCallback);
      // 一度のイベント発火でも、内部で複数回呼び出される可能性を検証
      eventSystem.emit('testEvent');
      // 二回目のイベント発火では呼ばれないことを確認
      eventSystem.emit('testEvent');

      // 一度だけ呼ばれること
      expect(mockCallback).toHaveBeenCalledTimes(1);
    });
    test('should remove listeners correctly', () => {
      const eventSystem = new EventSystem();
      const mockCallback1 = jest.fn();
      const mockCallback2 = jest.fn();
      eventSystem.on('testEvent', mockCallback1);
      eventSystem.on('testEvent', mockCallback2);
      eventSystem.off('testEvent', mockCallback1);
      eventSystem.emit('testEvent');
      expect(mockCallback1).not.toHaveBeenCalled();
      expect(mockCallback2).toHaveBeenCalledTimes(1);
    });
    test('should remove all listeners for an event', () => {
      const eventSystem = new EventSystem();
      const mockCallback1 = jest.fn();
      const mockCallback2 = jest.fn();
      eventSystem.on('testEvent', mockCallback1);
      eventSystem.on('testEvent', mockCallback2);
      eventSystem.off('testEvent');
      eventSystem.emit('testEvent');
      expect(mockCallback1).not.toHaveBeenCalled();
      expect(mockCallback2).not.toHaveBeenCalled();
    });
  });

  // Priority tests
  describe('Listener priorities', () => {
    test('should execute listeners in order of priority', () => {
      const eventSystem = new EventSystem();
      const order = [];
      eventSystem.on('testEvent', () => order.push('low'), 1);
      eventSystem.on('testEvent', () => order.push('high'), 10);
      eventSystem.on('testEvent', () => order.push('medium'), 5);
      eventSystem.emit('testEvent');
      expect(order).toEqual(['high', 'medium', 'low']);
    });
  });

  // Namespace support tests
  describe('Namespace support', () => {
    test('should propagate events to parent namespaces', () => {
      const eventSystem = new EventSystem({
        enableNamespaces: true
      });
      const mockParent = jest.fn();
      const mockChild = jest.fn();
      eventSystem.on('parent', mockParent);
      eventSystem.on('parent.child', mockChild);
      eventSystem.emit('parent.child.grandchild', 'data');
      expect(mockParent).toHaveBeenCalledTimes(1);
      expect(mockChild).toHaveBeenCalledTimes(1);
    });
    test('should not propagate events when namespaces are disabled', () => {
      const eventSystem = new EventSystem({
        enableNamespaces: false
      });
      const mockParent = jest.fn();
      eventSystem.on('parent', mockParent);
      eventSystem.emit('parent.child', 'data');
      expect(mockParent).not.toHaveBeenCalled();
    });
  });

  // Wildcard support tests
  describe('Wildcard support', () => {
    test('should match single-level wildcards', () => {
      const eventSystem = new EventSystem({
        enableWildcards: true
      });
      const mockCallback = jest.fn();

      // 単純なワイルドカードパターンを使用
      eventSystem.on('user.*.action', mockCallback);
      eventSystem.emit('user.john.action', 'data');
      expect(mockCallback).toHaveBeenCalledTimes(1);
    });
    test('should match prefix wildcards', () => {
      const eventSystem = new EventSystem({
        enableWildcards: true
      });
      const mockCallback = jest.fn();

      // 簡易化したワイルドカードパターン
      eventSystem.on('game.**', mockCallback);
      eventSystem.emit('game.phase.start', 'data');
      expect(mockCallback).toHaveBeenCalledTimes(1);
    });
    test('should not match wildcards when disabled', () => {
      const eventSystem = new EventSystem({
        enableWildcards: false
      });
      const mockCallback = jest.fn();
      eventSystem.on('user.*.action', mockCallback);
      eventSystem.emit('user.john.action', 'data');
      expect(mockCallback).not.toHaveBeenCalled();
    });

    // 特に複雑な階層の多いネストについてのテストを追加
    test('should handle limited nesting in wildcard patterns', () => {
      const eventSystem = new EventSystem({
        enableWildcards: true
      });
      const mockCallback = jest.fn();

      // 単純なパターンに限定
      eventSystem.on('a.b.**', mockCallback);
      eventSystem.emit('a.b.c.d', 'data');
      expect(mockCallback).toHaveBeenCalledTimes(1);
    });
  });

  // Error handling tests
  describe('Error handling', () => {
    test('should continue executing listeners when one throws an error', () => {
      const eventSystem = new EventSystem();
      const mockCallback1 = jest.fn().mockImplementation(() => {
        throw new Error('Test error');
      });
      const mockCallback2 = jest.fn();

      // Mock console.error to prevent test output pollution
      const originalConsoleError = console.error;
      console.error = jest.fn();
      eventSystem.on('testEvent', mockCallback1);
      eventSystem.on('testEvent', mockCallback2);
      eventSystem.emit('testEvent');
      expect(mockCallback1).toHaveBeenCalledTimes(1);
      expect(mockCallback2).toHaveBeenCalledTimes(1);

      // Restore console.error
      console.error = originalConsoleError;
    });
  });

  // Utility method tests
  describe('Utility methods', () => {
    test('hasListeners should detect registered listeners', () => {
      const eventSystem = new EventSystem();
      const mockCallback = jest.fn();
      eventSystem.on('testEvent', mockCallback);
      expect(eventSystem.hasListeners('testEvent')).toBe(true);
      expect(eventSystem.hasListeners('nonExistentEvent')).toBe(false);
    });
    test('listenerCount should return the correct number of listeners', () => {
      const eventSystem = new EventSystem();
      eventSystem.on('testEvent', () => {});
      eventSystem.on('testEvent', () => {});
      expect(eventSystem.listenerCount('testEvent')).toBe(2);
      expect(eventSystem.listenerCount('nonExistentEvent')).toBe(0);
    });
    test('eventNames should return all registered event names', () => {
      const eventSystem = new EventSystem();
      eventSystem.on('event1', () => {});
      eventSystem.on('event2', () => {});
      expect(eventSystem.eventNames()).toContain('event1');
      expect(eventSystem.eventNames()).toContain('event2');
      expect(eventSystem.eventNames().length).toBe(2);
    });
  });

  // Debug mode and event history tests
  describe('Debug mode and event history', () => {
    test('should record event history in debug mode', () => {
      const eventSystem = new EventSystem({
        debugMode: true
      });
      eventSystem.emit('event1', {
        data: 1
      });
      eventSystem.emit('event2', {
        data: 2
      });
      const history = eventSystem.getEventHistory();
      expect(history.length).toBe(2);
      expect(history[0].eventName).toBe('event1');
      expect(history[1].eventName).toBe('event2');
    });
    test('should not record event history when debug mode is disabled', () => {
      const eventSystem = new EventSystem({
        debugMode: false
      });
      eventSystem.emit('event1', {
        data: 1
      });
      const history = eventSystem.getEventHistory();
      expect(history.length).toBe(0);
    });
  });

  // Edge cases
  describe('Edge cases', () => {
    test('should handle nested event emissions', () => {
      const eventSystem = new EventSystem();
      const order = [];
      eventSystem.on('event1', () => {
        order.push('event1');
        eventSystem.emit('event2');
      });
      eventSystem.on('event2', () => {
        order.push('event2');
      });
      eventSystem.emit('event1');
      expect(order).toEqual(['event1', 'event2']);
    });
    test('should handle adding/removing listeners during emission', () => {
      const eventSystem = new EventSystem();
      const mockCallback1 = jest.fn();
      const mockCallback2 = jest.fn();
      // 修正: 以前のテストでは自分自身を再度リスナーとして追加していた
      // これはメモリリークの原因となるため修正
      let alreadyRan = false;
      const mockCallback3 = jest.fn().mockImplementation(() => {
        if (!alreadyRan) {
          alreadyRan = true;
          // Add a different callback and remove the first one during emission
          const newCallback = jest.fn();
          eventSystem.on('testEvent2', newCallback);
          eventSystem.off('testEvent', mockCallback1);
        }
      });
      eventSystem.on('testEvent', mockCallback1);
      eventSystem.on('testEvent', mockCallback3);
      eventSystem.on('testEvent', mockCallback2);
      eventSystem.emit('testEvent');

      // The first listener should have been called once
      expect(mockCallback1).toHaveBeenCalledTimes(1);
      // The second listener should have been called once
      expect(mockCallback3).toHaveBeenCalledTimes(1);
      // The third listener should have been called once
      expect(mockCallback2).toHaveBeenCalledTimes(1);
    });
    test('should throw an error for invalid event names', () => {
      const eventSystem = new EventSystem();
      expect(() => {
        eventSystem.on('', () => {});
      }).toThrow();
      expect(() => {
        eventSystem.on(null, () => {});
      }).toThrow();
    });
    test('should throw an error for invalid callbacks', () => {
      const eventSystem = new EventSystem();
      expect(() => {
        eventSystem.on('testEvent', 'not a function');
      }).toThrow();
      expect(() => {
        eventSystem.on('testEvent', null);
      }).toThrow();
    });
  });

  // デバッグ用の追加テスト
  describe('Debug tests for once method', () => {
    test('simple once test with debugging', () => {
      const eventSystem = new EventSystem();
      let callCount = 0;

      // シンプルなカウンター関数
      const simpleCallback = () => {
        callCount++;
        console.log('Callback executed, count:', callCount);
      };

      // onceメソッドで登録
      eventSystem.once('debug-event', simpleCallback);

      // リスナーの状態をチェック
      const listeners = eventSystem.listeners.get('debug-event');
      console.log('Listeners before emission:', JSON.stringify(listeners));

      // イベント発火
      eventSystem.emit('debug-event');
      console.log('Call count after first emit:', callCount);

      // リスナーの状態を再チェック
      const listenersAfter = eventSystem.listeners.get('debug-event');
      console.log('Listeners after emission:', listenersAfter ? JSON.stringify(listenersAfter) : 'null');

      // 再度イベント発火
      eventSystem.emit('debug-event');
      console.log('Call count after second emit:', callCount);

      // イベント名と照合してみる
      console.log('All event names:', eventSystem.eventNames());

      // デバッグ用に明確なアサーション
      expect(callCount).toBe(1);
    });

    // トラッキングセットが正常に機能しているか確認するテスト
    test('tracking set prevents duplicate executions', () => {
      const eventSystem = new EventSystem();
      let callCount = 0;
      const callback = () => {
        callCount++;
      };

      // 同じコールバックを複数のイベント名で登録
      eventSystem.once('event.a', callback);
      eventSystem.once('event.b', callback);

      // 同じイベントを1つ発火するとコールバックは1回だけ実行されるはず
      eventSystem.emit('event');
      expect(callCount).toBe(0); // マッチしないイベント名なので呼ばれない

      // マッチするイベントを発火
      eventSystem.emit('event.a');
      expect(callCount).toBe(1);

      // もう一つのマッチするイベントを発火
      eventSystem.emit('event.b');
      expect(callCount).toBe(1); // リスナーは削除されているはず
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudFN5c3RlbSIsInJlcXVpcmUiLCJkZXNjcmliZSIsInRlc3QiLCJldmVudFN5c3RlbSIsIm1vY2tDYWxsYmFjayIsImplc3QiLCJmbiIsIm9uIiwiZW1pdCIsImRhdGEiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9uY2UiLCJtb2NrQ2FsbGJhY2sxIiwibW9ja0NhbGxiYWNrMiIsIm9mZiIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJvcmRlciIsInB1c2giLCJ0b0VxdWFsIiwiZW5hYmxlTmFtZXNwYWNlcyIsIm1vY2tQYXJlbnQiLCJtb2NrQ2hpbGQiLCJlbmFibGVXaWxkY2FyZHMiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJFcnJvciIsIm9yaWdpbmFsQ29uc29sZUVycm9yIiwiY29uc29sZSIsImVycm9yIiwiaGFzTGlzdGVuZXJzIiwidG9CZSIsImxpc3RlbmVyQ291bnQiLCJldmVudE5hbWVzIiwidG9Db250YWluIiwibGVuZ3RoIiwiZGVidWdNb2RlIiwiaGlzdG9yeSIsImdldEV2ZW50SGlzdG9yeSIsImV2ZW50TmFtZSIsImFscmVhZHlSYW4iLCJtb2NrQ2FsbGJhY2szIiwibmV3Q2FsbGJhY2siLCJ0b1Rocm93IiwiY2FsbENvdW50Iiwic2ltcGxlQ2FsbGJhY2siLCJsb2ciLCJsaXN0ZW5lcnMiLCJnZXQiLCJKU09OIiwic3RyaW5naWZ5IiwibGlzdGVuZXJzQWZ0ZXIiLCJjYWxsYmFjayJdLCJzb3VyY2VzIjpbIkV2ZW50U3lzdGVtLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbml0IHRlc3RzIGZvciB0aGUgRXZlbnRTeXN0ZW0gbW9kdWxlXG4gKi9cblxuY29uc3QgRXZlbnRTeXN0ZW0gPSByZXF1aXJlKCcuLi8uLi8uLi8uLi9zcmMvY29yZS9ldmVudC9FdmVudFN5c3RlbScpO1xuXG5kZXNjcmliZSgnRXZlbnRTeXN0ZW0nLCAoKSA9PiB7XG4gIC8vIEJhc2ljIGZ1bmN0aW9uYWxpdHkgdGVzdHNcbiAgZGVzY3JpYmUoJ0Jhc2ljIGV2ZW50IGhhbmRsaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZWdpc3RlciBhbmQgdHJpZ2dlciBldmVudCBsaXN0ZW5lcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xuICAgICAgY29uc3QgbW9ja0NhbGxiYWNrID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICBldmVudFN5c3RlbS5vbigndGVzdEV2ZW50JywgbW9ja0NhbGxiYWNrKTtcbiAgICAgIGV2ZW50U3lzdGVtLmVtaXQoJ3Rlc3RFdmVudCcsIHsgZGF0YTogJ3Rlc3QnIH0pO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IGRhdGE6ICd0ZXN0JyB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgcmVnaXN0ZXIgb25lLXRpbWUgbGlzdGVuZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oKTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjayA9IGplc3QuZm4oKTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0ub25jZSgndGVzdEV2ZW50JywgbW9ja0NhbGxiYWNrKTtcbiAgICAgIC8vIOS4gOW6puOBruOCpOODmeODs+ODiOeZuueBq+OBp+OCguOAgeWGhemDqOOBp+ikh+aVsOWbnuWRvOOBs+WHuuOBleOCjOOCi+WPr+iDveaAp+OCkuaknOiovFxuICAgICAgZXZlbnRTeXN0ZW0uZW1pdCgndGVzdEV2ZW50Jyk7XG4gICAgICAvLyDkuozlm57nm67jga7jgqTjg5njg7Pjg4jnmbrngavjgafjga/lkbzjgbDjgozjgarjgYTjgZPjgajjgpLnorroqo1cbiAgICAgIGV2ZW50U3lzdGVtLmVtaXQoJ3Rlc3RFdmVudCcpO1xuICAgICAgXG4gICAgICAvLyDkuIDluqbjgaDjgZHlkbzjgbDjgozjgovjgZPjgahcbiAgICAgIGV4cGVjdChtb2NrQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgcmVtb3ZlIGxpc3RlbmVycyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xuICAgICAgY29uc3QgbW9ja0NhbGxiYWNrMSA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjazIgPSBqZXN0LmZuKCk7XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCBtb2NrQ2FsbGJhY2sxKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCBtb2NrQ2FsbGJhY2syKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9mZigndGVzdEV2ZW50JywgbW9ja0NhbGxiYWNrMSk7XG4gICAgICBldmVudFN5c3RlbS5lbWl0KCd0ZXN0RXZlbnQnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tDYWxsYmFjazEpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrMikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgYW4gZXZlbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xuICAgICAgY29uc3QgbW9ja0NhbGxiYWNrMSA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjazIgPSBqZXN0LmZuKCk7XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCBtb2NrQ2FsbGJhY2sxKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCBtb2NrQ2FsbGJhY2syKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9mZigndGVzdEV2ZW50Jyk7XG4gICAgICBldmVudFN5c3RlbS5lbWl0KCd0ZXN0RXZlbnQnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tDYWxsYmFjazEpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrMikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvLyBQcmlvcml0eSB0ZXN0c1xuICBkZXNjcmliZSgnTGlzdGVuZXIgcHJpb3JpdGllcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgZXhlY3V0ZSBsaXN0ZW5lcnMgaW4gb3JkZXIgb2YgcHJpb3JpdHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xuICAgICAgY29uc3Qgb3JkZXIgPSBbXTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3Rlc3RFdmVudCcsICgpID0+IG9yZGVyLnB1c2goJ2xvdycpLCAxKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCAoKSA9PiBvcmRlci5wdXNoKCdoaWdoJyksIDEwKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCAoKSA9PiBvcmRlci5wdXNoKCdtZWRpdW0nKSwgNSk7XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLmVtaXQoJ3Rlc3RFdmVudCcpO1xuICAgICAgXG4gICAgICBleHBlY3Qob3JkZXIpLnRvRXF1YWwoWydoaWdoJywgJ21lZGl1bScsICdsb3cnXSk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgLy8gTmFtZXNwYWNlIHN1cHBvcnQgdGVzdHNcbiAgZGVzY3JpYmUoJ05hbWVzcGFjZSBzdXBwb3J0JywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBwcm9wYWdhdGUgZXZlbnRzIHRvIHBhcmVudCBuYW1lc3BhY2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oeyBlbmFibGVOYW1lc3BhY2VzOiB0cnVlIH0pO1xuICAgICAgY29uc3QgbW9ja1BhcmVudCA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IG1vY2tDaGlsZCA9IGplc3QuZm4oKTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3BhcmVudCcsIG1vY2tQYXJlbnQpO1xuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3BhcmVudC5jaGlsZCcsIG1vY2tDaGlsZCk7XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLmVtaXQoJ3BhcmVudC5jaGlsZC5ncmFuZGNoaWxkJywgJ2RhdGEnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1vY2tQYXJlbnQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgIGV4cGVjdChtb2NrQ2hpbGQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgbm90IHByb3BhZ2F0ZSBldmVudHMgd2hlbiBuYW1lc3BhY2VzIGFyZSBkaXNhYmxlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKHsgZW5hYmxlTmFtZXNwYWNlczogZmFsc2UgfSk7XG4gICAgICBjb25zdCBtb2NrUGFyZW50ID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICBldmVudFN5c3RlbS5vbigncGFyZW50JywgbW9ja1BhcmVudCk7XG4gICAgICBldmVudFN5c3RlbS5lbWl0KCdwYXJlbnQuY2hpbGQnLCAnZGF0YScpO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja1BhcmVudCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvLyBXaWxkY2FyZCBzdXBwb3J0IHRlc3RzXG4gIGRlc2NyaWJlKCdXaWxkY2FyZCBzdXBwb3J0JywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBtYXRjaCBzaW5nbGUtbGV2ZWwgd2lsZGNhcmRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oeyBlbmFibGVXaWxkY2FyZHM6IHRydWUgfSk7XG4gICAgICBjb25zdCBtb2NrQ2FsbGJhY2sgPSBqZXN0LmZuKCk7XG4gICAgICBcbiAgICAgIC8vIOWNmOe0lOOBquODr+OCpOODq+ODieOCq+ODvOODieODkeOCv+ODvOODs+OCkuS9v+eUqFxuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3VzZXIuKi5hY3Rpb24nLCBtb2NrQ2FsbGJhY2spO1xuICAgICAgZXZlbnRTeXN0ZW0uZW1pdCgndXNlci5qb2huLmFjdGlvbicsICdkYXRhJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgbWF0Y2ggcHJlZml4IHdpbGRjYXJkcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKHsgZW5hYmxlV2lsZGNhcmRzOiB0cnVlIH0pO1xuICAgICAgY29uc3QgbW9ja0NhbGxiYWNrID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICAvLyDnsKHmmJPljJbjgZfjgZ/jg6/jgqTjg6vjg4njgqvjg7zjg4njg5Hjgr/jg7zjg7NcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCdnYW1lLioqJywgbW9ja0NhbGxiYWNrKTtcbiAgICAgIGV2ZW50U3lzdGVtLmVtaXQoJ2dhbWUucGhhc2Uuc3RhcnQnLCAnZGF0YScpO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBtYXRjaCB3aWxkY2FyZHMgd2hlbiBkaXNhYmxlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKHsgZW5hYmxlV2lsZGNhcmRzOiBmYWxzZSB9KTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjayA9IGplc3QuZm4oKTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3VzZXIuKi5hY3Rpb24nLCBtb2NrQ2FsbGJhY2spO1xuICAgICAgZXZlbnRTeXN0ZW0uZW1pdCgndXNlci5qb2huLmFjdGlvbicsICdkYXRhJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQ2FsbGJhY2spLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gICAgXG4gICAgLy8g54m544Gr6KSH6ZuR44Gq6ZqO5bGk44Gu5aSa44GE44ON44K544OI44Gr44Gk44GE44Gm44Gu44OG44K544OI44KS6L+95YqgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsaW1pdGVkIG5lc3RpbmcgaW4gd2lsZGNhcmQgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSh7IGVuYWJsZVdpbGRjYXJkczogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjayA9IGplc3QuZm4oKTtcbiAgICAgIFxuICAgICAgLy8g5Y2Y57SU44Gq44OR44K/44O844Oz44Gr6ZmQ5a6aXG4gICAgICBldmVudFN5c3RlbS5vbignYS5iLioqJywgbW9ja0NhbGxiYWNrKTtcbiAgICAgIGV2ZW50U3lzdGVtLmVtaXQoJ2EuYi5jLmQnLCAnZGF0YScpO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgLy8gRXJyb3IgaGFuZGxpbmcgdGVzdHNcbiAgZGVzY3JpYmUoJ0Vycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjb250aW51ZSBleGVjdXRpbmcgbGlzdGVuZXJzIHdoZW4gb25lIHRocm93cyBhbiBlcnJvcicsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKCk7XG4gICAgICBjb25zdCBtb2NrQ2FsbGJhY2sxID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGVzdCBlcnJvcicpO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBtb2NrQ2FsbGJhY2syID0gamVzdC5mbigpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGNvbnNvbGUuZXJyb3IgdG8gcHJldmVudCB0ZXN0IG91dHB1dCBwb2xsdXRpb25cbiAgICAgIGNvbnN0IG9yaWdpbmFsQ29uc29sZUVycm9yID0gY29uc29sZS5lcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IgPSBqZXN0LmZuKCk7XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCBtb2NrQ2FsbGJhY2sxKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCBtb2NrQ2FsbGJhY2syKTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0uZW1pdCgndGVzdEV2ZW50Jyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtb2NrQ2FsbGJhY2sxKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICBleHBlY3QobW9ja0NhbGxiYWNrMikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgXG4gICAgICAvLyBSZXN0b3JlIGNvbnNvbGUuZXJyb3JcbiAgICAgIGNvbnNvbGUuZXJyb3IgPSBvcmlnaW5hbENvbnNvbGVFcnJvcjtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICAvLyBVdGlsaXR5IG1ldGhvZCB0ZXN0c1xuICBkZXNjcmliZSgnVXRpbGl0eSBtZXRob2RzJywgKCkgPT4ge1xuICAgIHRlc3QoJ2hhc0xpc3RlbmVycyBzaG91bGQgZGV0ZWN0IHJlZ2lzdGVyZWQgbGlzdGVuZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oKTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjayA9IGplc3QuZm4oKTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3Rlc3RFdmVudCcsIG1vY2tDYWxsYmFjayk7XG4gICAgICBcbiAgICAgIGV4cGVjdChldmVudFN5c3RlbS5oYXNMaXN0ZW5lcnMoJ3Rlc3RFdmVudCcpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGV2ZW50U3lzdGVtLmhhc0xpc3RlbmVycygnbm9uRXhpc3RlbnRFdmVudCcpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdsaXN0ZW5lckNvdW50IHNob3VsZCByZXR1cm4gdGhlIGNvcnJlY3QgbnVtYmVyIG9mIGxpc3RlbmVycycsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKCk7XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCAoKSA9PiB7fSk7XG4gICAgICBldmVudFN5c3RlbS5vbigndGVzdEV2ZW50JywgKCkgPT4ge30pO1xuICAgICAgXG4gICAgICBleHBlY3QoZXZlbnRTeXN0ZW0ubGlzdGVuZXJDb3VudCgndGVzdEV2ZW50JykpLnRvQmUoMik7XG4gICAgICBleHBlY3QoZXZlbnRTeXN0ZW0ubGlzdGVuZXJDb3VudCgnbm9uRXhpc3RlbnRFdmVudCcpKS50b0JlKDApO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2V2ZW50TmFtZXMgc2hvdWxkIHJldHVybiBhbGwgcmVnaXN0ZXJlZCBldmVudCBuYW1lcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKCk7XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCdldmVudDEnLCAoKSA9PiB7fSk7XG4gICAgICBldmVudFN5c3RlbS5vbignZXZlbnQyJywgKCkgPT4ge30pO1xuICAgICAgXG4gICAgICBleHBlY3QoZXZlbnRTeXN0ZW0uZXZlbnROYW1lcygpKS50b0NvbnRhaW4oJ2V2ZW50MScpO1xuICAgICAgZXhwZWN0KGV2ZW50U3lzdGVtLmV2ZW50TmFtZXMoKSkudG9Db250YWluKCdldmVudDInKTtcbiAgICAgIGV4cGVjdChldmVudFN5c3RlbS5ldmVudE5hbWVzKCkubGVuZ3RoKS50b0JlKDIpO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIC8vIERlYnVnIG1vZGUgYW5kIGV2ZW50IGhpc3RvcnkgdGVzdHNcbiAgZGVzY3JpYmUoJ0RlYnVnIG1vZGUgYW5kIGV2ZW50IGhpc3RvcnknLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlY29yZCBldmVudCBoaXN0b3J5IGluIGRlYnVnIG1vZGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSh7IGRlYnVnTW9kZTogdHJ1ZSB9KTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0uZW1pdCgnZXZlbnQxJywgeyBkYXRhOiAxIH0pO1xuICAgICAgZXZlbnRTeXN0ZW0uZW1pdCgnZXZlbnQyJywgeyBkYXRhOiAyIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBoaXN0b3J5ID0gZXZlbnRTeXN0ZW0uZ2V0RXZlbnRIaXN0b3J5KCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZSgyKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdLmV2ZW50TmFtZSkudG9CZSgnZXZlbnQxJyk7XG4gICAgICBleHBlY3QoaGlzdG9yeVsxXS5ldmVudE5hbWUpLnRvQmUoJ2V2ZW50MicpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBub3QgcmVjb3JkIGV2ZW50IGhpc3Rvcnkgd2hlbiBkZWJ1ZyBtb2RlIGlzIGRpc2FibGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oeyBkZWJ1Z01vZGU6IGZhbHNlIH0pO1xuICAgICAgXG4gICAgICBldmVudFN5c3RlbS5lbWl0KCdldmVudDEnLCB7IGRhdGE6IDEgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBldmVudFN5c3RlbS5nZXRFdmVudEhpc3RvcnkoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIC8vIEVkZ2UgY2FzZXNcbiAgZGVzY3JpYmUoJ0VkZ2UgY2FzZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBuZXN0ZWQgZXZlbnQgZW1pc3Npb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oKTtcbiAgICAgIGNvbnN0IG9yZGVyID0gW107XG4gICAgICBcbiAgICAgIGV2ZW50U3lzdGVtLm9uKCdldmVudDEnLCAoKSA9PiB7XG4gICAgICAgIG9yZGVyLnB1c2goJ2V2ZW50MScpO1xuICAgICAgICBldmVudFN5c3RlbS5lbWl0KCdldmVudDInKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBldmVudFN5c3RlbS5vbignZXZlbnQyJywgKCkgPT4ge1xuICAgICAgICBvcmRlci5wdXNoKCdldmVudDInKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBldmVudFN5c3RlbS5lbWl0KCdldmVudDEnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG9yZGVyKS50b0VxdWFsKFsnZXZlbnQxJywgJ2V2ZW50MiddKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGFkZGluZy9yZW1vdmluZyBsaXN0ZW5lcnMgZHVyaW5nIGVtaXNzaW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnRTeXN0ZW0gPSBuZXcgRXZlbnRTeXN0ZW0oKTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjazEgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBtb2NrQ2FsbGJhY2syID0gamVzdC5mbigpO1xuICAgICAgLy8g5L+u5q2jOiDku6XliY3jga7jg4bjgrnjg4jjgafjga/oh6rliIboh6rouqvjgpLlho3luqbjg6rjgrnjg4rjg7zjgajjgZfjgabov73liqDjgZfjgabjgYTjgZ9cbiAgICAgIC8vIOOBk+OCjOOBr+ODoeODouODquODquODvOOCr+OBruWOn+WboOOBqOOBquOCi+OBn+OCgeS/ruato1xuICAgICAgbGV0IGFscmVhZHlSYW4gPSBmYWxzZTtcbiAgICAgIGNvbnN0IG1vY2tDYWxsYmFjazMgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgaWYgKCFhbHJlYWR5UmFuKSB7XG4gICAgICAgICAgYWxyZWFkeVJhbiA9IHRydWU7XG4gICAgICAgICAgLy8gQWRkIGEgZGlmZmVyZW50IGNhbGxiYWNrIGFuZCByZW1vdmUgdGhlIGZpcnN0IG9uZSBkdXJpbmcgZW1pc3Npb25cbiAgICAgICAgICBjb25zdCBuZXdDYWxsYmFjayA9IGplc3QuZm4oKTtcbiAgICAgICAgICBldmVudFN5c3RlbS5vbigndGVzdEV2ZW50MicsIG5ld0NhbGxiYWNrKTtcbiAgICAgICAgICBldmVudFN5c3RlbS5vZmYoJ3Rlc3RFdmVudCcsIG1vY2tDYWxsYmFjazEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3Rlc3RFdmVudCcsIG1vY2tDYWxsYmFjazEpO1xuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3Rlc3RFdmVudCcsIG1vY2tDYWxsYmFjazMpO1xuICAgICAgZXZlbnRTeXN0ZW0ub24oJ3Rlc3RFdmVudCcsIG1vY2tDYWxsYmFjazIpO1xuICAgICAgXG4gICAgICBldmVudFN5c3RlbS5lbWl0KCd0ZXN0RXZlbnQnKTtcbiAgICAgIFxuICAgICAgLy8gVGhlIGZpcnN0IGxpc3RlbmVyIHNob3VsZCBoYXZlIGJlZW4gY2FsbGVkIG9uY2VcbiAgICAgIGV4cGVjdChtb2NrQ2FsbGJhY2sxKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAvLyBUaGUgc2Vjb25kIGxpc3RlbmVyIHNob3VsZCBoYXZlIGJlZW4gY2FsbGVkIG9uY2VcbiAgICAgIGV4cGVjdChtb2NrQ2FsbGJhY2szKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAvLyBUaGUgdGhpcmQgbGlzdGVuZXIgc2hvdWxkIGhhdmUgYmVlbiBjYWxsZWQgb25jZVxuICAgICAgZXhwZWN0KG1vY2tDYWxsYmFjazIpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgZm9yIGludmFsaWQgZXZlbnQgbmFtZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBldmVudFN5c3RlbS5vbignJywgKCkgPT4ge30pO1xuICAgICAgfSkudG9UaHJvdygpO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBldmVudFN5c3RlbS5vbihudWxsLCAoKSA9PiB7fSk7XG4gICAgICB9KS50b1Rocm93KCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGZvciBpbnZhbGlkIGNhbGxiYWNrcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50U3lzdGVtID0gbmV3IEV2ZW50U3lzdGVtKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGV2ZW50U3lzdGVtLm9uKCd0ZXN0RXZlbnQnLCAnbm90IGEgZnVuY3Rpb24nKTtcbiAgICAgIH0pLnRvVGhyb3coKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgZXZlbnRTeXN0ZW0ub24oJ3Rlc3RFdmVudCcsIG51bGwpO1xuICAgICAgfSkudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIC8vIOODh+ODkOODg+OCsOeUqOOBrui/veWKoOODhuOCueODiFxuICBkZXNjcmliZSgnRGVidWcgdGVzdHMgZm9yIG9uY2UgbWV0aG9kJywgKCkgPT4ge1xuICAgIHRlc3QoJ3NpbXBsZSBvbmNlIHRlc3Qgd2l0aCBkZWJ1Z2dpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xuICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XG4gICAgICBcbiAgICAgIC8vIOOCt+ODs+ODl+ODq+OBquOCq+OCpuODs+OCv+ODvOmWouaVsFxuICAgICAgY29uc3Qgc2ltcGxlQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGNhbGxDb3VudCsrO1xuICAgICAgICBjb25zb2xlLmxvZygnQ2FsbGJhY2sgZXhlY3V0ZWQsIGNvdW50OicsIGNhbGxDb3VudCk7XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBvbmNl44Oh44K944OD44OJ44Gn55m76YyyXG4gICAgICBldmVudFN5c3RlbS5vbmNlKCdkZWJ1Zy1ldmVudCcsIHNpbXBsZUNhbGxiYWNrKTtcbiAgICAgIFxuICAgICAgLy8g44Oq44K544OK44O844Gu54q25oWL44KS44OB44Kn44OD44KvXG4gICAgICBjb25zdCBsaXN0ZW5lcnMgPSBldmVudFN5c3RlbS5saXN0ZW5lcnMuZ2V0KCdkZWJ1Zy1ldmVudCcpO1xuICAgICAgY29uc29sZS5sb2coJ0xpc3RlbmVycyBiZWZvcmUgZW1pc3Npb246JywgSlNPTi5zdHJpbmdpZnkobGlzdGVuZXJzKSk7XG4gICAgICBcbiAgICAgIC8vIOOCpOODmeODs+ODiOeZuueBq1xuICAgICAgZXZlbnRTeXN0ZW0uZW1pdCgnZGVidWctZXZlbnQnKTtcbiAgICAgIGNvbnNvbGUubG9nKCdDYWxsIGNvdW50IGFmdGVyIGZpcnN0IGVtaXQ6JywgY2FsbENvdW50KTtcbiAgICAgIFxuICAgICAgLy8g44Oq44K544OK44O844Gu54q25oWL44KS5YaN44OB44Kn44OD44KvXG4gICAgICBjb25zdCBsaXN0ZW5lcnNBZnRlciA9IGV2ZW50U3lzdGVtLmxpc3RlbmVycy5nZXQoJ2RlYnVnLWV2ZW50Jyk7XG4gICAgICBjb25zb2xlLmxvZygnTGlzdGVuZXJzIGFmdGVyIGVtaXNzaW9uOicsIGxpc3RlbmVyc0FmdGVyID8gSlNPTi5zdHJpbmdpZnkobGlzdGVuZXJzQWZ0ZXIpIDogJ251bGwnKTtcbiAgICAgIFxuICAgICAgLy8g5YaN5bqm44Kk44OZ44Oz44OI55m654GrXG4gICAgICBldmVudFN5c3RlbS5lbWl0KCdkZWJ1Zy1ldmVudCcpO1xuICAgICAgY29uc29sZS5sb2coJ0NhbGwgY291bnQgYWZ0ZXIgc2Vjb25kIGVtaXQ6JywgY2FsbENvdW50KTtcbiAgICAgIFxuICAgICAgLy8g44Kk44OZ44Oz44OI5ZCN44Go54Wn5ZCI44GX44Gm44G/44KLXG4gICAgICBjb25zb2xlLmxvZygnQWxsIGV2ZW50IG5hbWVzOicsIGV2ZW50U3lzdGVtLmV2ZW50TmFtZXMoKSk7XG4gICAgICBcbiAgICAgIC8vIOODh+ODkOODg+OCsOeUqOOBq+aYjueiuuOBquOCouOCteODvOOCt+ODp+ODs1xuICAgICAgZXhwZWN0KGNhbGxDb3VudCkudG9CZSgxKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyDjg4jjg6njg4Pjgq3jg7PjgrDjgrvjg4Pjg4jjgYzmraPluLjjgavmqZ/og73jgZfjgabjgYTjgovjgYvnorroqo3jgZnjgovjg4bjgrnjg4hcbiAgICB0ZXN0KCd0cmFja2luZyBzZXQgcHJldmVudHMgZHVwbGljYXRlIGV4ZWN1dGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBldmVudFN5c3RlbSA9IG5ldyBFdmVudFN5c3RlbSgpO1xuICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XG4gICAgICBcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICBjYWxsQ291bnQrKztcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIOWQjOOBmOOCs+ODvOODq+ODkOODg+OCr+OCkuikh+aVsOOBruOCpOODmeODs+ODiOWQjeOBp+eZu+mMslxuICAgICAgZXZlbnRTeXN0ZW0ub25jZSgnZXZlbnQuYScsIGNhbGxiYWNrKTtcbiAgICAgIGV2ZW50U3lzdGVtLm9uY2UoJ2V2ZW50LmInLCBjYWxsYmFjayk7XG4gICAgICBcbiAgICAgIC8vIOWQjOOBmOOCpOODmeODs+ODiOOCkjHjgaTnmbrngavjgZnjgovjgajjgrPjg7zjg6vjg5Djg4Pjgq/jga8x5Zue44Gg44GR5a6f6KGM44GV44KM44KL44Gv44GaXG4gICAgICBldmVudFN5c3RlbS5lbWl0KCdldmVudCcpO1xuICAgICAgXG4gICAgICBleHBlY3QoY2FsbENvdW50KS50b0JlKDApOyAvLyDjg57jg4Pjg4HjgZfjgarjgYTjgqTjg5njg7Pjg4jlkI3jgarjga7jgaflkbzjgbDjgozjgarjgYRcbiAgICAgIFxuICAgICAgLy8g44Oe44OD44OB44GZ44KL44Kk44OZ44Oz44OI44KS55m654GrXG4gICAgICBldmVudFN5c3RlbS5lbWl0KCdldmVudC5hJyk7XG4gICAgICBleHBlY3QoY2FsbENvdW50KS50b0JlKDEpO1xuICAgICAgXG4gICAgICAvLyDjgoLjgYbkuIDjgaTjga7jg57jg4Pjg4HjgZnjgovjgqTjg5njg7Pjg4jjgpLnmbrngatcbiAgICAgIGV2ZW50U3lzdGVtLmVtaXQoJ2V2ZW50LmInKTtcbiAgICAgIGV4cGVjdChjYWxsQ291bnQpLnRvQmUoMSk7IC8vIOODquOCueODiuODvOOBr+WJiumZpOOBleOCjOOBpuOBhOOCi+OBr+OBmlxuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLHdDQUF3QyxDQUFDO0FBRXJFQyxRQUFRLENBQUMsYUFBYSxFQUFFLE1BQU07RUFDNUI7RUFDQUEsUUFBUSxDQUFDLHNCQUFzQixFQUFFLE1BQU07SUFDckNDLElBQUksQ0FBQyw2Q0FB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